import{o as r,d as m,a as e,z as w,Q as P,h as j,r as N,j as V,O as y,l as T,b as a,u as o,w as t,F as g,Z as I,f as i,t as n,e as x,c as E,g as z,n as h,A as M,B as U}from"./app-5152dbdc.js";import{_ as q,f as J}from"./AuthenticatedLayout-285c013a.js";import{_ as $}from"./PrimaryLink-292b04d4.js";import{s as K,a as v}from"./tabpanel.esm-09c41f08.js";import A from"./LeaseDetail-6abea6eb.js";import{_ as Q,a as X}from"./Associates-49e8882a.js";import{_ as C}from"./BoxIcon-7bb10c0a.js";import{V as Z,p as G,s as H}from"./filepond.min-e3b09907.js";/* empty css                */import O from"./BasicTerms-ed83f181.js";import k from"./RentSchedule-1a91f189.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";import"./toast-6536a686.js";import"./DropdownLink-f93895f9.js";import"./index-9f061b1d.js";import"./ToastList-00cab0c3.js";import"./ripple.esm-940661e6.js";import"./index.esm-cca197f8.js";import"./index.esm-3aff614f.js";import"./Table-222d0b2e.js";const Y={class:"col-span-6 rounded-lg shadow-md border p-4"},ee={class:"text-indigo-500"},f={__name:"SmallCard",setup(s){return(u,S)=>(r(),m("div",Y,[e("h5",ee,[w(u.$slots,"header")]),w(u.$slots,"default")]))}};const d=s=>(M("data-v-80a1242a"),s=s(),U(),s),se={class:"grid grid-cols-12 gap-4"},ae={class:"col-span-6"},te={class:"mb-8"},le={class:"text-indigo-600"},oe={class:"text-gray-500"},ne={class:"col-span-6 flex flex-col"},de={class:"max-h-36 overflow-auto h-36"},ce={class:"ml-auto mt-4"},ie={key:0,class:"relative px-5 py-3 border-2 bg-red-50 text-red-700 border-red-100 rounded mt-6 text-center"},re=d(()=>e("h5",null,"Lease Expired!",-1)),ue=[re],_e={class:"col-span-6 mt-2"},me=d(()=>e("div",{class:"flex align-items-center gap-2"},[e("h6",{class:"font-bold white-space-nowrap"},"Current Lease")],-1)),he={class:"grid grid-cols-12 gap-6"},fe={class:"json-container"},pe=d(()=>e("h3",null,"Raw Extracted Data",-1)),ge=d(()=>e("h4",null,"Basic Extracted Data",-1)),xe=d(()=>e("h4",null,"Detailed Extracted Data",-1)),ve=d(()=>e("div",{class:"flex align-items-center gap-2"},[e("h6",{class:"font-bold white-space-nowrap"},"Original Lease Abstract")],-1)),Se={class:"grid grid-cols-12 gap-6"},be={class:"flex align-items-center gap-2"},we={class:"inline-flex items-center text-xs font-medium"},ye={class:"relative flex h-2.5 w-2.5"},Ee={class:"font-bold white-space-nowrap"},$e={class:"text-gray-400"},Ae={class:"min-h-96"},Ce={class:"m-0"},Oe={class:"json-container"},ke=d(()=>e("h3",null,"Raw Extracted Amendment Data",-1)),Be=d(()=>e("h4",null,"Basic Extracted Data",-1)),Fe=d(()=>e("h4",null,"Detailed Extracted Data",-1)),Re={__name:"Show",props:{asset:Object,associates:Array,lease:Object},setup(s){const u=P(),S=j(()=>u.props.auth.user),B=s,{getFileStatusClass:p}=J(),F=Z(G),R=N(null);let _="";H({credits:[],required:!0,allowMultiple:!0,allowRevert:!1,acceptedFileTypes:["application/pdf"],server:{process:{url:route("leases.amendments.store",[B.lease]),headers:{Accept:"application/json","X-CSRF-TOKEN":u.props.csrf},ondata:l=>(l.append("classification","lease_amendment"),l),onsuccess:l=>{console.log("on success"),console.log(l)},onerror:l=>{console.log("on error"),_=JSON.parse(l)}}},labelFileProcessingError:l=>(console.log(l),console.log(_),_.errors&&_.errors.lease_amendment?_.errors.lease_amendment.join(" "):_.message)});const D=(l,L)=>{console.log("on process file"),y.reload({only:["lease"]})};return V(()=>{Echo.private(`tenant-global-channel.${u.props.tenant_id}`).listen("AmendmentProcessingUpdate",l=>{console.log(l),y.reload()})}),T(()=>{S.value&&Echo.leave(`tenant-global-channel.${u.props.tenant_id}`)}),(l,L)=>(r(),m(g,null,[a(o(I),{title:"Asset"}),a(q,null,{header:t(()=>[i(" Asset - "+n(s.asset.name),1)]),default:t(()=>[a($,{href:l.route("assets.show",s.asset)},{default:t(()=>[a(C,{class:"bx-arrow-back mr-2"}),i("Leases ")]),_:1},8,["href"]),a(Q,{asset:s.asset},null,8,["asset"]),a(X,{associates:s.associates},null,8,["associates"]),e("div",se,[e("div",ae,[e("div",te,[e("h2",le,n(s.lease.tenant),1),e("h5",oe,n(s.lease.premise_address),1)])]),e("div",ne,[e("div",de,[a(o(F),{name:"lease_amendment",ref_key:"pond",ref:R,onProcessfile:D,"class-name":"my-file-upload","label-idle":"Amendment Drop or <span class='filepond--label-action'>Browse</span>"},null,512)]),e("div",ce,[a($,{class:"bg-indigo-600",href:l.route("assets.leases.chats.index",[s.asset,s.lease])},{default:t(()=>[i(" Leasemate"),a(C,{class:"bx-comment-detail ml-2"})]),_:1},8,["href"])])])]),s.lease.expired?(r(),m("div",ie,ue)):x("",!0),e("div",_e,[a(o(K),{scrollable:!0},{default:t(()=>[a(o(v),null,{header:t(()=>[me]),default:t(()=>[e("div",he,[a(f,null,{header:t(()=>[i(" Basic Terms ")]),default:t(()=>[a(O,{lease:s.lease},null,8,["lease"])]),_:1}),a(f,null,{header:t(()=>[i(" Rent Schedule ")]),default:t(()=>[a(k,{lease:s.lease},null,8,["lease"])]),_:1})]),a(A,{lease_detail:s.lease.lease_detail},null,8,["lease_detail"]),e("div",fe,[pe,ge,e("pre",null,n(s.lease.lease_document.document_detail.basic_extracted_data??"--"),1),xe,e("pre",null,n(s.lease.lease_document.document_detail.detailed_extracted_data??"--"),1)])]),_:1}),s.lease.amendments.length?(r(),E(o(v),{key:0},{header:t(()=>[ve]),default:t(()=>[e("div",Se,[a(f,null,{header:t(()=>[i(" Basic Terms ")]),default:t(()=>[a(O,{lease:s.lease.lease_document.document_detail.basic_extracted_data??{}},null,8,["lease"])]),_:1}),a(f,null,{header:t(()=>[i(" Rent Schedule ")]),default:t(()=>[a(k,{lease:s.lease.lease_document.document_detail.basic_extracted_data??{}},null,8,["lease"])]),_:1})]),a(A,{lease_detail:s.lease.lease_document.document_detail.detailed_extracted_data??{}},null,8,["lease_detail"])]),_:1})):x("",!0),s.lease.amendments?(r(!0),m(g,{key:1},z(s.lease.amendments,(c,b)=>(r(),E(o(v),{key:b},{header:t(()=>[e("div",be,[e("span",we,[e("span",ye,[["Ready","Failed","Archived"].includes(c.document.status)?(r(),m("span",{key:1,class:h(["relative inline-flex h-2.5 w-2.5 rounded-full",o(p)(c.document.status,"PROCESS_CLASSES")])},null,2)):(r(),m(g,{key:0},[e("span",{class:h(["absolute inline-flex h-full w-full animate-ping rounded-full",o(p)(c.document.status,"PROCESS_CLASSES")])},null,2),e("span",{class:h(["relative inline-flex h-2.5 w-2.5 rounded-full",o(p)(c.document.status,"PROCESS_CLASSES")])},null,2)],64))])]),e("span",Ee,[e("h6",{class:h({"text-red-400":c.document.status==="Failed"})},[i(" Amendment #"+n(++b)+" ",1),e("small",$e,n(c.execution_date),1)],2)])])]),default:t(()=>[e("div",Ae,[e("p",Ce,[e("div",Oe,[ke,Be,e("pre",null,n(c.document.document_detail.basic_extracted_data??"--"),1),Fe,e("pre",null,n(c.document.document_detail.detailed_extracted_data??"--"),1)])])])]),_:2},1024))),128)):x("",!0)]),_:1})])]),_:1})],64))}},Ye=W(Re,[["__scopeId","data-v-80a1242a"]]);export{Ye as default};
