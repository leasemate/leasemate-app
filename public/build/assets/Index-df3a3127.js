import{_ as w,h as C,f as F}from"./AuthenticatedLayout-263ca8e0.js";import{K as D,h as S,m as h,k as U,O as v,C as $,o as u,f as m,a as s,u as n,w as a,F as x,Z as M,d,b as e,j as B,s as j,t as l,n as A}from"./app-b527ca51.js";import{_ as N}from"./Pagination-528290a4.js";import{_ as Y,a as z,D as E}from"./DangerButton-7866b2ad.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./feather-76b3fb28.js";const O={class:"py-6"},V={class:"relative flex justify-end mb-4"},T=e("i",{class:"bx bx-plus text-16 align-middle ltr:mr-1 rtl:ml-1"},null,-1),I={class:"flex flex-col"},K={class:"overflow-x-auto"},L={class:"inline-block min-w-full align-middle"},Z={class:"overflow-visible"},q={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600"},G=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",{class:"text-gray-800 dark:text-gray-300"},[e("th",{scope:"col",class:"p-3.5 text-sm text-start font-semibold min-w-[10rem]"}," File Name "),e("th",{scope:"col",class:"p-3.5 text-sm text-start font-semibold min-w-[10rem]"}," Uploaded "),e("th",{scope:"col",class:"p-3.5 text-sm text-start font-semibold min-w-[6rem]"}," File Size "),e("th",{scope:"col",class:"p-3.5 text-sm text-start font-semibold min-w-[8rem]"}," Status "),e("th",{scope:"col",class:"p-3.5 text-sm text-start font-semibold"}," Action ")])],-1),H={class:"divide-y divide-gray-200 dark:divide-gray-600"},J={class:"p-3.5 text-sm text-gray-700 dark:text-gray-400"},P=["href"],Q={class:"p-3.5 text-sm text-gray-700 dark:text-gray-400"},R={class:"text-xs"},W={class:"p-3.5 text-sm text-gray-700 dark:text-gray-400"},X={class:"p-3.5 text-sm text-gray-700 dark:text-gray-400"},ee={class:"p-3.5"},te=["onClick"],se=e("i",{class:"bx bx-trash text-lg hover:text-red-400"},null,-1),oe=[se],ae={class:"p-6"},le=e("h2",{class:"text-lg font-medium text-gray-900"}," Are you sure you want to delete this document? ",-1),ie={class:"mt-6 flex justify-end"},pe={__name:"Index",props:{uploaded_files:{type:Object}},setup(_){const g=D(),p=S(()=>g.props.auth.user),{getFileStatusClass:b}=F(),o=h(null),r=h(!1),y=i=>{r.value=!0,o.value=i},c=()=>{r.value=!1,o.value=null},k=()=>{console.log(o.value),o.value&&v.delete(route("file-upload.destroy",o.value.id),{preserveScroll:!0,onSuccess:()=>{o.value=null,c()}})};return U(()=>{Echo.private(`App.Models.User.${p.value.id}`).listen("FileStatusUpdate",i=>{console.log("file-processed event.."),v.reload({only:["uploaded_files"]})})}),$(()=>{Echo.leaveChannel(`App.Models.User.${p.value.id}`)}),(i,f)=>(u(),m(x,null,[s(n(M),{title:"File Upload"}),s(w,null,{header:a(()=>[d(" File Upload ")]),default:a(()=>[e("div",O,[e("div",V,[s(n(B),{href:i.route("file-upload.create"),type:"button",class:"mb-4 btn text-white bg-violet-500 border-violet-500 hover:bg-violet-600 hover:border-violet-600 focus:bg-violet-600 focus:border-violet-600 focus:ring focus:ring-violet-500/30 active:bg-violet-600 active:border-violet-600"},{default:a(()=>[T,d(" Upload ")]),_:1},8,["href"])]),e("div",I,[e("div",K,[e("div",L,[e("div",Z,[e("table",q,[G,e("tbody",H,[(u(!0),m(x,null,j(_.uploaded_files.data,t=>(u(),m("tr",{key:t.id},[e("td",J,[e("a",{href:t.download_link,target:"_blank",rel:"noopener noreferrer",class:"font-medium"},l(t.original_name),9,P)]),e("td",Q,[e("p",null,l(n(C)(t.created_at).format("MMM DD, YYYY h:mm a")),1),e("span",R,"by "+l(t.user.name),1)]),e("td",W,l(t.size_readable),1),e("td",X,[e("span",{class:A(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset",n(b)(t.status)])},l(t.status),3)]),e("td",ee,[e("button",{onClick:ne=>y(t)},oe,8,te)])]))),128))])])])])])]),s(N,{dataset:_.uploaded_files,class:"mt-4"},null,8,["dataset"]),s(Y,{show:r.value,onClose:c},{default:a(()=>[e("div",ae,[le,e("div",ie,[s(z,{onClick:c},{default:a(()=>[d(" Cancel ")]),_:1}),s(E,{class:"ml-3",onClick:f[0]||(f[0]=t=>k())},{default:a(()=>[d(" Delete File ")]),_:1})])])]),_:1},8,["show"])])]),_:1})],64))}};export{pe as default};
