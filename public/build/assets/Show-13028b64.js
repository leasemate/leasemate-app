import{o as d,d as r,a as e,z as P,Q as N,h as T,r as V,j as I,O as $,l as M,b as a,u as n,w as l,F as f,Z as U,f as u,t as i,e as x,c as b,n as _,g as L,s as q,A as J,B as K}from"./app-184687fe.js";import{_ as Q,f as X}from"./AuthenticatedLayout-064ab8f6.js";import{_ as R}from"./PrimaryLink-1fe238f6.js";import{_ as Z}from"./Table-d66de742.js";import{s as G,a as S}from"./tabpanel.esm-cd70b9f1.js";import"./index.esm-1346832e.js";import"./index.esm-83a6fc26.js";import"./ripple.esm-4c49d6ed.js";import w from"./LeaseDetail-306b2f7b.js";import{_ as H,a as W}from"./Associates-06845119.js";import{_ as B}from"./BoxIcon-a3a71292.js";import{V as Y,p as ee,s as se}from"./filepond.min-516d11a4.js";/* empty css                */import y from"./BasicTerms-93c95326.js";import E from"./RentSchedule-2e6a85ce.js";import{_ as ae}from"./_plugin-vue_export-helper-c27b6911.js";import"./toast-64e32881.js";import"./DropdownLink-2f2609f6.js";import"./index-19d0c77c.js";import"./ToastList-40a62746.js";const le={class:"col-span-6 rounded-lg shadow-md border p-4"},te={class:"text-indigo-500"},g={__name:"SmallCard",setup(s){return(m,C)=>(d(),r("div",le,[e("h5",te,[P(m.$slots,"header")]),P(m.$slots,"default")]))}};const c=s=>(J("data-v-ea72a8aa"),s=s(),K(),s),ne={class:"grid grid-cols-12 gap-4"},oe={class:"col-span-6"},ie={class:"mb-8"},de={class:"text-indigo-600"},ce={class:"text-gray-500"},re={class:"col-span-6 flex flex-col"},ue={class:"max-h-36 overflow-auto h-36"},_e={class:"ml-auto mt-4"},he={key:0,class:"relative px-5 py-3 border-2 bg-red-50 text-red-700 border-red-100 rounded mt-6 text-center"},me=c(()=>e("h5",null,"Lease Expired!",-1)),pe=[me],fe={class:"col-span-6 mt-2"},ge=c(()=>e("div",{class:"flex align-items-center gap-2"},[e("h6",{class:"font-bold white-space-nowrap"},"Current Lease")],-1)),xe={class:"grid grid-cols-12 gap-6"},Se={class:"json-container"},ve=c(()=>e("h3",null,"Original Lease Extraction Data",-1)),be=c(()=>e("h4",null,"Basic Extracted Data",-1)),we=c(()=>e("h4",null,"Detailed Extracted Data",-1)),ye={class:"flex align-items-center gap-2"},Ee={class:"inline-flex items-center text-xs font-medium"},Ce={class:"relative flex h-2.5 w-2.5"},ke=c(()=>e("span",{class:"font-bold white-space-nowrap"},[e("h6",null,"Amendment Processing")],-1)),Ae=c(()=>e("tr",null,[e("th",{scope:"col",class:"pl-4 pr-2 py-3"}),e("th",{scope:"col",class:"px-6 py-3"}," Amendment "),e("th",{scope:"col",class:"px-6 py-3"}," Progress ")],-1)),Oe={class:"pl-4 pr-2 py-4 space-x-2"},Pe={class:"relative mr-1.5 flex h-2.5 w-2.5"},$e={class:"whitespace-nowrap"},Le={class:"pl-4 pr-2 py-4 space-x-2"},Re=["href"],Be={class:"pl-4 pr-2 py-4 space-x-2"},De={class:"flex items-center"},Fe={class:"flex-1 progress h-2.5 w-full bg-gray-200 rounded-full relative dark:bg-zinc-600"},je={class:"ml-2 font-bold"},ze={class:"flex align-items-center gap-2"},Ne={class:"inline-flex items-center text-xs font-medium"},Te={class:"relative flex h-2.5 w-2.5"},Ve={class:"font-bold white-space-nowrap"},Ie={class:"text-gray-400"},Me={class:"grid grid-cols-12 gap-6"},Ue={class:"min-h-96"},qe={class:"m-0"},Je={class:"json-container"},Ke=c(()=>e("h3",null,"Amendment Extraction Data",-1)),Qe=c(()=>e("h4",null,"Basic Extracted Data",-1)),Xe=c(()=>e("h4",null,"Detailed Extracted Data",-1)),Ze=c(()=>e("div",{class:"flex align-items-center gap-2"},[e("h6",{class:"font-bold white-space-nowrap"},"Original Lease")],-1)),Ge={class:"grid grid-cols-12 gap-6"},He={class:"min-h-96"},We={class:"m-0"},Ye={class:"json-container"},es=c(()=>e("h3",null,"Original Lease Extraction Data",-1)),ss=c(()=>e("h4",null,"Basic Extracted Data",-1)),as=c(()=>e("h4",null,"Detailed Extracted Data",-1)),ls={__name:"Show",props:{asset:Object,associates:Array,lease:Object},setup(s){const m=N(),C=T(()=>m.props.auth.user),k=s,{getFileStatusClass:h}=X(),D=Y(ee),F=V(null);let p="";se({credits:[],required:!0,allowMultiple:!0,allowRevert:!1,acceptedFileTypes:["application/pdf"],server:{process:{url:route("assets.leases.store-amendment",[k.asset,k.lease]),headers:{Accept:"application/json","X-CSRF-TOKEN":m.props.csrf},ondata:o=>(o.append("classification","lease_amendment"),o),onsuccess:o=>{console.log("on success"),console.log(o)},onerror:o=>{console.log("on error"),p=JSON.parse(o)}}},labelFileProcessingError:o=>(console.log(o),console.log(p),p.errors&&p.errors.lease_amendment?p.errors.lease_amendment.join(" "):p.message)});const j=(o,z)=>{console.log("on process file"),$.reload({only:["lease"]})};return I(()=>{Echo.private(`tenant-global-channel.${m.props.tenant_id}`).listen("LeaseProcessingUpdate",o=>{console.log(o),$.reload()})}),M(()=>{C.value&&Echo.leave(`tenant-global-channel.${m.props.tenant_id}`)}),(o,z)=>(d(),r(f,null,[a(n(U),{title:"Asset"}),a(Q,null,{header:l(()=>[u(" Asset - "+i(s.asset.name),1)]),default:l(()=>[a(R,{href:o.route("assets.show",s.asset)},{default:l(()=>[a(B,{class:"bx-arrow-back mr-2"}),u("Leases ")]),_:1},8,["href"]),a(H,{asset:s.asset},null,8,["asset"]),a(W,{associates:s.associates},null,8,["associates"]),e("div",ne,[e("div",oe,[e("div",ie,[e("h2",de,i(s.lease.tenant),1),e("h5",ce,i(s.lease.premise_address),1)])]),e("div",re,[e("div",ue,[a(n(D),{name:"lease_amendment",ref_key:"pond",ref:F,onProcessfile:j,"class-name":"my-file-upload","label-idle":"Amendment Drop or <span class='filepond--label-action'>Browse</span>"},null,512)]),e("div",_e,[a(R,{class:"bg-indigo-600",href:o.route("assets.leases.chats.index",[s.asset,s.lease])},{default:l(()=>[u(" Leasemate"),a(B,{class:"bx-comment-detail ml-2"})]),_:1},8,["href"])])])]),s.lease.expired?(d(),r("div",he,pe)):x("",!0),e("div",fe,[a(n(G),{scrollable:!0},{default:l(()=>[a(n(S),null,{header:l(()=>[ge]),default:l(()=>[e("div",xe,[a(g,null,{header:l(()=>[u(" Basic Terms ")]),default:l(()=>[a(y,{lease:s.lease},null,8,["lease"])]),_:1}),a(g,null,{header:l(()=>[u(" Rent Schedule ")]),default:l(()=>[a(E,{lease:s.lease},null,8,["lease"])]),_:1})]),a(w,{lease_detail:s.lease.lease_detail},null,8,["lease_detail"]),e("div",Se,[s.lease.original_lease?x("",!0):(d(),r(f,{key:0},[ve,be,e("pre",null,i(s.lease.lease_document.document_detail.basic_extracted_data??"--"),1),we,e("pre",null,i(s.lease.lease_document.document_detail.detailed_extracted_data??"--"),1)],64))])]),_:1}),s.lease.amendments_processing.length?(d(),b(n(S),{key:0},{header:l(()=>[e("div",ye,[e("span",Ee,[e("span",Ce,[e("span",{class:_(["absolute inline-flex h-full w-full animate-ping rounded-full",n(h)("Pending","PROCESS_CLASSES")])},null,2),e("span",{class:_(["relative inline-flex h-2.5 w-2.5 rounded-full",n(h)("Pending","PROCESS_CLASSES")])},null,2)])]),ke])]),default:l(()=>[a(Z,null,{head:l(()=>[Ae]),body:l(()=>[(d(!0),r(f,null,L(s.lease.amendments_processing,(t,v)=>(d(),r("tr",{key:t.id,class:"bg-white border-b border-gray-50 dark:bg-zinc-700/50 dark:border-zinc-600"},[e("td",Oe,[e("span",{class:_(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset",n(h)(t.lease_document.status)])},[e("span",Pe,[["Ready","Failed","Archived"].includes(t.lease_document.status)?(d(),r("span",{key:1,class:_(["relative inline-flex h-2.5 w-2.5 rounded-full",n(h)(t.lease_document.status,"PROCESS_CLASSES")])},null,2)):(d(),r(f,{key:0},[e("span",{class:_(["absolute inline-flex h-full w-full animate-ping rounded-full",n(h)(t.lease_document.status,"PROCESS_CLASSES")])},null,2),e("span",{class:_(["relative inline-flex h-2.5 w-2.5 rounded-full",n(h)(t.lease_document.status,"PROCESS_CLASSES")])},null,2)],64))]),e("span",$e,i(t.lease_document.status),1)],2)]),e("td",Le,[e("a",{href:t.lease_document.file_name,target:"_blank",class:"underline"},i(t.lease_document.name),9,Re)]),e("td",Be,[e("div",De,[e("div",Fe,[e("div",{class:"progress-bar h-2.5 bg-indigo-600 rounded-full ltr:rounded-r-none rtl:rounded-l-none progress-bar-striped animate-strip",style:q(`width: ${t.lease_document.status_progress??"0%"};`),role:"progressbar"},null,4)]),e("div",je,i(t.lease_document.status_progress??""),1)])])]))),128))]),_:1})]),_:1})):x("",!0),s.lease.amendments?(d(!0),r(f,{key:1},L(s.lease.amendments,(t,v)=>(d(),b(n(S),{key:v},{header:l(()=>[e("div",ze,[e("span",Ne,[e("span",Te,[["Ready","Failed","Archived"].includes(t.lease_document.status)?(d(),r("span",{key:1,class:_(["relative inline-flex h-2.5 w-2.5 rounded-full",n(h)(t.lease_document.status,"PROCESS_CLASSES")])},null,2)):(d(),r(f,{key:0},[e("span",{class:_(["absolute inline-flex h-full w-full animate-ping rounded-full",n(h)(t.lease_document.status,"PROCESS_CLASSES")])},null,2),e("span",{class:_(["relative inline-flex h-2.5 w-2.5 rounded-full",n(h)(t.lease_document.status,"PROCESS_CLASSES")])},null,2)],64))])]),e("span",Ve,[e("h6",{class:_({"text-red-400":t.lease_document.status==="Failed"})},[u(" Amendment #"+i(s.lease.amendments.length-v)+" ",1),e("small",Ie,i(t.execution_date),1)],2)])])]),default:l(()=>{var A,O;return[e("div",Me,[a(g,null,{header:l(()=>[u(" Basic Terms ")]),default:l(()=>[a(y,{lease:t},null,8,["lease"])]),_:2},1024),a(g,null,{header:l(()=>[u(" Rent Schedule ")]),default:l(()=>[a(E,{lease:t},null,8,["lease"])]),_:2},1024)]),a(w,{lease_detail:t.lease_detail??{}},null,8,["lease_detail"]),e("div",Ue,[e("p",qe,[e("div",Je,[Ke,Qe,e("pre",null,i(((A=t.lease_document.document_detail)==null?void 0:A.basic_extracted_data)??"--"),1),Xe,e("pre",null,i(((O=t.lease_document.document_detail)==null?void 0:O.detailed_extracted_data)??"--"),1)])])])]}),_:2},1024))),128)):x("",!0),s.lease.original_lease?(d(),b(n(S),{key:2},{header:l(()=>[Ze]),default:l(()=>[e("div",Ge,[a(g,null,{header:l(()=>[u(" Basic Terms ")]),default:l(()=>[a(y,{lease:s.lease.original_lease},null,8,["lease"])]),_:1}),a(g,null,{header:l(()=>[u(" Rent Schedule ")]),default:l(()=>[a(E,{lease:s.lease.original_lease},null,8,["lease"])]),_:1})]),a(w,{lease_detail:s.lease.original_lease.lease_detail},null,8,["lease_detail"]),e("div",He,[e("p",We,[e("div",Ye,[es,ss,e("pre",null,i(s.lease.lease_document.document_detail.basic_extracted_data??"--"),1),as,e("pre",null,i(s.lease.lease_document.document_detail.detailed_extracted_data??"--"),1)])])])]),_:1})):x("",!0)]),_:1})])]),_:1})],64))}},Es=ae(ls,[["__scopeId","data-v-ea72a8aa"]]);export{Es as default};
