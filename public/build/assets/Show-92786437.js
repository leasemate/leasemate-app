import{o as c,d as r,a as e,z as P,Q as T,h as V,r as z,j as I,O as L,l as M,b as a,u as n,w as l,F as f,Z as U,f as u,t as d,e as x,c as b,n as _,g as $,A as q,B as J}from"./app-bbab07c2.js";import{_ as K,f as Q}from"./AuthenticatedLayout-65a86ba5.js";import{_ as R}from"./PrimaryLink-5ae59152.js";import{_ as X}from"./Table-7e181d9a.js";import{s as Z,a as S}from"./tabpanel.esm-60a7dc86.js";import"./index.esm-f263415a.js";import"./index.esm-379912d7.js";import"./ripple.esm-5efac9b9.js";import w from"./LeaseDetail-8f26c185.js";import{_ as G,a as H}from"./Associates-d5c076b3.js";import{_ as B}from"./BoxIcon-b2f94bcd.js";import{V as W,p as Y,s as ee}from"./filepond.min-9bd7a10a.js";/* empty css                */import y from"./BasicTerms-8c08f31e.js";import E from"./RentSchedule-c681e2b9.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";import"./toast-d4d9175a.js";import"./DropdownLink-fa148c22.js";import"./index-c120c139.js";import"./ToastList-54093eda.js";const ae={class:"col-span-6 rounded-lg shadow-md border p-4"},le={class:"text-indigo-500"},g={__name:"SmallCard",setup(s){return(m,C)=>(c(),r("div",ae,[e("h5",le,[P(m.$slots,"header")]),P(m.$slots,"default")]))}};const o=s=>(q("data-v-5b3f7070"),s=s(),J(),s),te={class:"grid grid-cols-12 gap-4"},ne={class:"col-span-6"},oe={class:"mb-8"},ie={class:"text-indigo-600"},de={class:"text-gray-500"},ce={class:"col-span-6 flex flex-col"},re={class:"max-h-36 overflow-auto h-36"},ue={class:"ml-auto mt-4"},_e={key:0,class:"relative px-5 py-3 border-2 bg-red-50 text-red-700 border-red-100 rounded mt-6 text-center"},he=o(()=>e("h5",null,"Lease Expired!",-1)),me=[he],pe={class:"col-span-6 mt-2"},fe=o(()=>e("div",{class:"flex align-items-center gap-2"},[e("h6",{class:"font-bold white-space-nowrap"},"Current Lease")],-1)),ge={class:"grid grid-cols-12 gap-6"},xe={class:"json-container"},Se=o(()=>e("h3",null,"Original Lease Extraction Data",-1)),ve=o(()=>e("h4",null,"Basic Extracted Data",-1)),be=o(()=>e("h4",null,"Detailed Extracted Data",-1)),we={class:"flex align-items-center gap-2"},ye={class:"inline-flex items-center text-xs font-medium"},Ee={class:"relative flex h-2.5 w-2.5"},Ce=o(()=>e("span",{class:"font-bold white-space-nowrap"},[e("h6",null,"Amendment Processing")],-1)),Ae=o(()=>e("tr",null,[e("th",{scope:"col",class:"pl-4 pr-2 py-3"}),e("th",{scope:"col",class:"px-6 py-3"}," Amendment "),e("th",{scope:"col",class:"px-6 py-3"}," Progress ")],-1)),ke={class:"pl-4 pr-2 py-4 space-x-2"},Oe={class:"relative mr-1.5 flex h-2.5 w-2.5"},Pe={class:"whitespace-nowrap"},Le={class:"pl-4 pr-2 py-4 space-x-2"},$e=o(()=>e("td",{class:"pl-4 pr-2 py-4 space-x-2"},[e("div",{class:"flex items-center"},[e("div",{class:"flex-1 progress h-2.5 w-full bg-gray-200 rounded-full relative dark:bg-zinc-600"},[e("div",{class:"progress-bar h-2.5 bg-indigo-600 rounded-full ltr:rounded-r-none rtl:rounded-l-none progress-bar-striped animate-strip",style:"width: 30%",role:"progressbar"})]),e("div",{class:"ml-2 font-bold"},"30%")])],-1)),Re={class:"flex align-items-center gap-2"},Be={class:"inline-flex items-center text-xs font-medium"},De={class:"relative flex h-2.5 w-2.5"},Fe={class:"font-bold white-space-nowrap"},je={class:"text-gray-400"},Ne={class:"grid grid-cols-12 gap-6"},Te={class:"min-h-96"},Ve={class:"m-0"},ze={class:"json-container"},Ie=o(()=>e("h3",null,"Amendment Extraction Data",-1)),Me=o(()=>e("h4",null,"Basic Extracted Data",-1)),Ue=o(()=>e("h4",null,"Detailed Extracted Data",-1)),qe=o(()=>e("div",{class:"flex align-items-center gap-2"},[e("h6",{class:"font-bold white-space-nowrap"},"Original Lease")],-1)),Je={class:"grid grid-cols-12 gap-6"},Ke={class:"min-h-96"},Qe={class:"m-0"},Xe={class:"json-container"},Ze=o(()=>e("h3",null,"Original Lease Extraction Data",-1)),Ge=o(()=>e("h4",null,"Basic Extracted Data",-1)),He=o(()=>e("h4",null,"Detailed Extracted Data",-1)),We={__name:"Show",props:{asset:Object,associates:Array,lease:Object},setup(s){const m=T(),C=V(()=>m.props.auth.user),A=s,{getFileStatusClass:h}=Q(),D=W(Y),F=z(null);let p="";ee({credits:[],required:!0,allowMultiple:!0,allowRevert:!1,acceptedFileTypes:["application/pdf"],server:{process:{url:route("assets.leases.store-amendment",[A.asset,A.lease]),headers:{Accept:"application/json","X-CSRF-TOKEN":m.props.csrf},ondata:i=>(i.append("classification","lease_amendment"),i),onsuccess:i=>{console.log("on success"),console.log(i)},onerror:i=>{console.log("on error"),p=JSON.parse(i)}}},labelFileProcessingError:i=>(console.log(i),console.log(p),p.errors&&p.errors.lease_amendment?p.errors.lease_amendment.join(" "):p.message)});const j=(i,N)=>{console.log("on process file"),L.reload({only:["lease"]})};return I(()=>{Echo.private(`tenant-global-channel.${m.props.tenant_id}`).listen("LeaseProcessingUpdate",i=>{console.log(i),L.reload()})}),M(()=>{C.value&&Echo.leave(`tenant-global-channel.${m.props.tenant_id}`)}),(i,N)=>(c(),r(f,null,[a(n(U),{title:"Asset"}),a(K,null,{header:l(()=>[u(" Asset - "+d(s.asset.name),1)]),default:l(()=>[a(R,{href:i.route("assets.show",s.asset)},{default:l(()=>[a(B,{class:"bx-arrow-back mr-2"}),u("Leases ")]),_:1},8,["href"]),a(G,{asset:s.asset},null,8,["asset"]),a(H,{associates:s.associates},null,8,["associates"]),e("div",te,[e("div",ne,[e("div",oe,[e("h2",ie,d(s.lease.tenant),1),e("h5",de,d(s.lease.premise_address),1)])]),e("div",ce,[e("div",re,[a(n(D),{name:"lease_amendment",ref_key:"pond",ref:F,onProcessfile:j,"class-name":"my-file-upload","label-idle":"Amendment Drop or <span class='filepond--label-action'>Browse</span>"},null,512)]),e("div",ue,[a(R,{class:"bg-indigo-600",href:i.route("assets.leases.chats.index",[s.asset,s.lease])},{default:l(()=>[u(" Leasemate"),a(B,{class:"bx-comment-detail ml-2"})]),_:1},8,["href"])])])]),s.lease.expired?(c(),r("div",_e,me)):x("",!0),e("div",pe,[a(n(Z),{scrollable:!0},{default:l(()=>[a(n(S),null,{header:l(()=>[fe]),default:l(()=>[e("div",ge,[a(g,null,{header:l(()=>[u(" Basic Terms ")]),default:l(()=>[a(y,{lease:s.lease},null,8,["lease"])]),_:1}),a(g,null,{header:l(()=>[u(" Rent Schedule ")]),default:l(()=>[a(E,{lease:s.lease},null,8,["lease"])]),_:1})]),a(w,{lease_detail:s.lease.lease_detail},null,8,["lease_detail"]),e("div",xe,[s.lease.original_lease?x("",!0):(c(),r(f,{key:0},[Se,ve,e("pre",null,d(s.lease.lease_document.document_detail.basic_extracted_data??"--"),1),be,e("pre",null,d(s.lease.lease_document.document_detail.detailed_extracted_data??"--"),1)],64))])]),_:1}),s.lease.amendments_processing.length?(c(),b(n(S),{key:0},{header:l(()=>[e("div",we,[e("span",ye,[e("span",Ee,[e("span",{class:_(["absolute inline-flex h-full w-full animate-ping rounded-full",n(h)("Pending","PROCESS_CLASSES")])},null,2),e("span",{class:_(["relative inline-flex h-2.5 w-2.5 rounded-full",n(h)("Pending","PROCESS_CLASSES")])},null,2)])]),Ce])]),default:l(()=>[a(X,null,{head:l(()=>[Ae]),body:l(()=>[(c(!0),r(f,null,$(s.lease.amendments_processing,(t,v)=>(c(),r("tr",{key:t.id,class:"bg-white border-b border-gray-50 dark:bg-zinc-700/50 dark:border-zinc-600"},[e("td",ke,[e("span",{class:_(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset",n(h)(t.lease_document.status)])},[e("span",Oe,[["Ready","Failed","Archived"].includes(t.lease_document.status)?(c(),r("span",{key:1,class:_(["relative inline-flex h-2.5 w-2.5 rounded-full",n(h)(t.lease_document.status,"PROCESS_CLASSES")])},null,2)):(c(),r(f,{key:0},[e("span",{class:_(["absolute inline-flex h-full w-full animate-ping rounded-full",n(h)(t.lease_document.status,"PROCESS_CLASSES")])},null,2),e("span",{class:_(["relative inline-flex h-2.5 w-2.5 rounded-full",n(h)(t.lease_document.status,"PROCESS_CLASSES")])},null,2)],64))]),e("span",Pe,d(t.lease_document.status)+" "+d(t.lease_document.status_progress),1)],2)]),e("td",Le,d(t.lease_document.name),1),$e]))),128))]),_:1})]),_:1})):x("",!0),s.lease.amendments?(c(!0),r(f,{key:1},$(s.lease.amendments,(t,v)=>(c(),b(n(S),{key:v},{header:l(()=>[e("div",Re,[e("span",Be,[e("span",De,[["Ready","Failed","Archived"].includes(t.lease_document.status)?(c(),r("span",{key:1,class:_(["relative inline-flex h-2.5 w-2.5 rounded-full",n(h)(t.lease_document.status,"PROCESS_CLASSES")])},null,2)):(c(),r(f,{key:0},[e("span",{class:_(["absolute inline-flex h-full w-full animate-ping rounded-full",n(h)(t.lease_document.status,"PROCESS_CLASSES")])},null,2),e("span",{class:_(["relative inline-flex h-2.5 w-2.5 rounded-full",n(h)(t.lease_document.status,"PROCESS_CLASSES")])},null,2)],64))])]),e("span",Fe,[e("h6",{class:_({"text-red-400":t.lease_document.status==="Failed"})},[u(" Amendment #"+d(s.lease.amendments.length-v)+" ",1),e("small",je,d(t.execution_date),1)],2)])])]),default:l(()=>{var k,O;return[e("div",Ne,[a(g,null,{header:l(()=>[u(" Basic Terms ")]),default:l(()=>[a(y,{lease:t},null,8,["lease"])]),_:2},1024),a(g,null,{header:l(()=>[u(" Rent Schedule ")]),default:l(()=>[a(E,{lease:t},null,8,["lease"])]),_:2},1024)]),a(w,{lease_detail:t.lease_detail??{}},null,8,["lease_detail"]),e("div",Te,[e("p",Ve,[e("div",ze,[Ie,Me,e("pre",null,d(((k=t.lease_document.document_detail)==null?void 0:k.basic_extracted_data)??"--"),1),Ue,e("pre",null,d(((O=t.lease_document.document_detail)==null?void 0:O.detailed_extracted_data)??"--"),1)])])])]}),_:2},1024))),128)):x("",!0),s.lease.original_lease?(c(),b(n(S),{key:2},{header:l(()=>[qe]),default:l(()=>[e("div",Je,[a(g,null,{header:l(()=>[u(" Basic Terms ")]),default:l(()=>[a(y,{lease:s.lease.original_lease},null,8,["lease"])]),_:1}),a(g,null,{header:l(()=>[u(" Rent Schedule ")]),default:l(()=>[a(E,{lease:s.lease.original_lease},null,8,["lease"])]),_:1})]),a(w,{lease_detail:s.lease.original_lease.lease_detail},null,8,["lease_detail"]),e("div",Ke,[e("p",Qe,[e("div",Xe,[Ze,Ge,e("pre",null,d(s.lease.lease_document.document_detail.basic_extracted_data??"--"),1),He,e("pre",null,d(s.lease.lease_document.document_detail.detailed_extracted_data??"--"),1)])])])]),_:1})):x("",!0)]),_:1})])]),_:1})],64))}},Ss=se(We,[["__scopeId","data-v-5b3f7070"]]);export{Ss as default};
