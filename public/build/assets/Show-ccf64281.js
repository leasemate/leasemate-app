import{o as c,d as r,a as e,z as A,Q as N,h as T,r as V,j as z,O as B,l as I,b as a,u,w as t,F as f,Z as M,f as i,t as d,e as x,g as U,c as O,n as p,s as q,A as J,B as K}from"./app-a930395f.js";import{_ as Q,f as X}from"./AuthenticatedLayout-d6be7e2d.js";import{_ as R}from"./PrimaryLink-2f985680.js";import{s as Z,a as v}from"./tabpanel.esm-9304eced.js";import"./index.esm-1d9e4a4d.js";import"./index.esm-19451ef2.js";import"./ripple.esm-0d841e4d.js";import b from"./LeaseDetail-63507138.js";import{_ as G,a as H}from"./Associates-51e308e2.js";import{_ as D}from"./BoxIcon-3d46e591.js";import{V as W,p as Y,s as ee}from"./filepond.min-24e2f2af.js";/* empty css                */import S from"./BasicTerms-583ad3b9.js";import y from"./RentSchedule-f316df70.js";import{_ as se}from"./_plugin-vue_export-helper-c27b6911.js";import"./toast-3ef75ea4.js";import"./DropdownLink-57e11a3a.js";import"./index-b056f864.js";import"./ToastList-9e9a5a99.js";import"./Table-c1c5ec5f.js";const ae={class:"col-span-6 rounded-lg shadow-md border p-4"},te={class:"text-indigo-500"},m={__name:"SmallCard",setup(s){return(_,w)=>(c(),r("div",ae,[e("h5",te,[A(_.$slots,"header")]),A(_.$slots,"default")]))}};const n=s=>(J("data-v-48c56d7a"),s=s(),K(),s),le={class:"grid grid-cols-12 gap-4"},oe={class:"col-span-6"},ne={class:"mb-8"},de={class:"text-indigo-600"},ce={class:"text-gray-500"},ie={class:"col-span-6 flex flex-col"},re={class:"max-h-36 overflow-auto h-36"},ue={class:"ml-auto mt-4"},_e={key:0,class:"relative px-5 py-3 border-2 bg-red-50 text-red-700 border-red-100 rounded mt-6 text-center"},he=n(()=>e("h5",null,"Lease Expired!",-1)),me=[he],fe={class:"col-span-6 mt-2"},pe=n(()=>e("div",{class:"flex align-items-center gap-2"},[e("h6",{class:"font-bold white-space-nowrap"},"Current Lease")],-1)),ge={class:"grid grid-cols-12 gap-6"},xe={class:"json-container"},ve={key:0},be=n(()=>e("h3",null,"Original Lease",-1)),Se=n(()=>e("h4",null,"Basic Extracted Data",-1)),ye=n(()=>e("h4",null,"Detailed Extracted Data",-1)),we={class:"flex align-items-center gap-2"},Ee={class:"inline-flex items-center text-xs font-medium"},$e={class:"relative flex h-2.5 w-2.5"},ke={class:"font-bold white-space-nowrap"},Ce={class:"text-gray-400"},Ae={class:"grid grid-cols-12 gap-6"},Be={class:"min-h-96"},Oe={class:"m-0"},Re={class:"json-container"},De=n(()=>e("h3",null,"Raw Extracted Amendment Data",-1)),Le=n(()=>e("h4",null,"Basic Extracted Data",-1)),Fe=n(()=>e("h4",null,"Detailed Extracted Data",-1)),Pe={key:1,class:"flex justify-center items-center h-96"},je={class:"text-center"},Ne={class:"text-gray-500"},Te={class:"progress h-2.5 my-6 w-full bg-gray-50 rounded-full relative dark:bg-zinc-600"},Ve=n(()=>e("p",{class:"text-gray-400"},"Please wait while we process your amendment",-1)),ze=n(()=>e("div",{class:"flex align-items-center gap-2"},[e("h6",{class:"font-bold white-space-nowrap"},"Original Lease Abstract")],-1)),Ie={class:"grid grid-cols-12 gap-6"},Me={class:"min-h-96"},Ue={class:"m-0"},qe={class:"json-container"},Je=n(()=>e("h3",null,"Raw Extracted Amendment Data",-1)),Ke=n(()=>e("h4",null,"Basic Extracted Data",-1)),Qe=n(()=>e("h4",null,"Detailed Extracted Data",-1)),Xe={__name:"Show",props:{asset:Object,associates:Array,lease:Object},setup(s){const _=N(),w=T(()=>_.props.auth.user),E=s,{getFileStatusClass:g}=X(),L=W(Y),F=V(null);let h="";ee({credits:[],required:!0,allowMultiple:!0,allowRevert:!1,acceptedFileTypes:["application/pdf"],server:{process:{url:route("assets.leases.store-amendment",[E.asset,E.lease]),headers:{Accept:"application/json","X-CSRF-TOKEN":_.props.csrf},ondata:l=>(l.append("classification","lease_amendment"),l),onsuccess:l=>{console.log("on success"),console.log(l)},onerror:l=>{console.log("on error"),h=JSON.parse(l)}}},labelFileProcessingError:l=>(console.log(l),console.log(h),h.errors&&h.errors.lease_amendment?h.errors.lease_amendment.join(" "):h.message)});const P=(l,j)=>{console.log("on process file"),B.reload({only:["lease"]})};return z(()=>{Echo.private(`tenant-global-channel.${_.props.tenant_id}`).listen("LeaseProcessingUpdate",l=>{console.log(l),B.reload()})}),I(()=>{w.value&&Echo.leave(`tenant-global-channel.${_.props.tenant_id}`)}),(l,j)=>(c(),r(f,null,[a(u(M),{title:"Asset"}),a(Q,null,{header:t(()=>[i(" Asset - "+d(s.asset.name),1)]),default:t(()=>[a(R,{href:l.route("assets.show",s.asset)},{default:t(()=>[a(D,{class:"bx-arrow-back mr-2"}),i("Leases ")]),_:1},8,["href"]),a(G,{asset:s.asset},null,8,["asset"]),a(H,{associates:s.associates},null,8,["associates"]),e("div",le,[e("div",oe,[e("div",ne,[e("h2",de,d(s.lease.tenant),1),e("h5",ce,d(s.lease.premise_address),1)])]),e("div",ie,[e("div",re,[a(u(L),{name:"lease_amendment",ref_key:"pond",ref:F,onProcessfile:P,"class-name":"my-file-upload","label-idle":"Amendment Drop or <span class='filepond--label-action'>Browse</span>"},null,512)]),e("div",ue,[a(R,{class:"bg-indigo-600",href:l.route("assets.leases.chats.index",[s.asset,s.lease])},{default:t(()=>[i(" Leasemate"),a(D,{class:"bx-comment-detail ml-2"})]),_:1},8,["href"])])])]),s.lease.expired?(c(),r("div",_e,me)):x("",!0),e("div",fe,[a(u(Z),{scrollable:!0},{default:t(()=>[a(u(v),null,{header:t(()=>[pe]),default:t(()=>[e("div",ge,[a(m,null,{header:t(()=>[i(" Basic Terms ")]),default:t(()=>[a(S,{lease:s.lease.current_lease??s.lease},null,8,["lease"])]),_:1}),a(m,null,{header:t(()=>[i(" Rent Schedule ")]),default:t(()=>[a(y,{lease:s.lease.current_lease??s.lease},null,8,["lease"])]),_:1})]),a(b,{lease_detail:s.lease.current_lease?s.lease.current_lease.lease_detail:s.lease.lease_detail},null,8,["lease_detail"]),e("div",xe,[s.lease.current_lease?(c(),r("h3",ve,"Current Lease")):(c(),r(f,{key:1},[be,Se,e("pre",null,d(s.lease.lease_document.document_detail.basic_extracted_data??"--"),1),ye,e("pre",null,d(s.lease.lease_document.document_detail.detailed_extracted_data??"--"),1)],64))])]),_:1}),s.lease.amendments?(c(!0),r(f,{key:0},U(s.lease.amendments,(o,$)=>(c(),O(u(v),{key:$},{header:t(()=>[e("div",we,[e("span",Ee,[e("span",$e,[["Ready","Failed","Archived"].includes(o.lease_document.status)?(c(),r("span",{key:1,class:p(["relative inline-flex h-2.5 w-2.5 rounded-full",u(g)(o.lease_document.status,"PROCESS_CLASSES")])},null,2)):(c(),r(f,{key:0},[e("span",{class:p(["absolute inline-flex h-full w-full animate-ping rounded-full",u(g)(o.lease_document.status,"PROCESS_CLASSES")])},null,2),e("span",{class:p(["relative inline-flex h-2.5 w-2.5 rounded-full",u(g)(o.lease_document.status,"PROCESS_CLASSES")])},null,2)],64))])]),e("span",ke,[e("h6",{class:p({"text-red-400":o.lease_document.status==="Failed"})},[i(" Amendment #"+d(s.lease.amendments.length-$)+" ",1),e("small",Ce,d(o.execution_date),1)],2)])])]),default:t(()=>{var k,C;return[o.lease_document.status=="Ready"?(c(),r(f,{key:0},[e("div",Ae,[a(m,null,{header:t(()=>[i(" Basic Terms ")]),default:t(()=>[a(S,{lease:o},null,8,["lease"])]),_:2},1024),a(m,null,{header:t(()=>[i(" Rent Schedule ")]),default:t(()=>[a(y,{lease:o},null,8,["lease"])]),_:2},1024)]),a(b,{lease_detail:o.lease_detail??{}},null,8,["lease_detail"]),e("div",Be,[e("p",Oe,[e("div",Re,[De,Le,e("pre",null,d(((k=o.lease_document.document_detail)==null?void 0:k.basic_extracted_data)??"--"),1),Fe,e("pre",null,d(((C=o.lease_document.document_detail)==null?void 0:C.detailed_extracted_data)??"--"),1)])])])],64)):(c(),r("div",Pe,[e("div",je,[e("h4",Ne,d(o.lease_document.status)+"...",1),e("div",Te,[e("div",{class:"progress-bar h-2.5 bg-indigo-600 rounded-full ltr:rounded-r-none rtl:rounded-l-none progress-bar-striped animate-strip",style:q(`width: ${o.lease_document.status_progress??"2%"};`),role:"progressbar"},null,4)]),Ve])]))]}),_:2},1024))),128)):x("",!0),s.lease.current_lease?(c(),O(u(v),{key:1},{header:t(()=>[ze]),default:t(()=>[e("div",Ie,[a(m,null,{header:t(()=>[i(" Basic Terms ")]),default:t(()=>[a(S,{lease:s.lease},null,8,["lease"])]),_:1}),a(m,null,{header:t(()=>[i(" Rent Schedule ")]),default:t(()=>[a(y,{lease:s.lease},null,8,["lease"])]),_:1})]),a(b,{lease_detail:s.lease.lease_detail},null,8,["lease_detail"]),e("div",Me,[e("p",Ue,[e("div",qe,[Je,Ke,e("pre",null,d(s.lease.lease_document.document_detail.basic_extracted_data??"--"),1),Qe,e("pre",null,d(s.lease.lease_document.document_detail.detailed_extracted_data??"--"),1)])])])]),_:1})):x("",!0)]),_:1})])]),_:1})],64))}},fs=se(Xe,[["__scopeId","data-v-48c56d7a"]]);export{fs as default};
