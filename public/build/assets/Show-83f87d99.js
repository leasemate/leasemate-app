import{K as w,h as E,i as v,j as F,O as g,k as A,o as n,d as r,b as o,u as l,w as i,F as m,Z as C,f as h,t as a,a as s,g as O,n as _,c as R,v as P}from"./app-31bc7d92.js";import{_ as N,f as T}from"./AuthenticatedLayout-563ec2df.js";import{_ as z}from"./PrimaryLink-f8d082a0.js";import{T as B}from"./Table-aa2cbc95.js";import{V as L,p as $,s as j}from"./filepond.min-ce43d72f.js";import{_ as V,a as q}from"./Associates-76eeee59.js";import"./toast-75c883e5.js";import"./DropdownLink-090e337c.js";import"./ToastList-2e562bbe.js";import"./_plugin-vue_export-helper-c27b6911.js";const M={class:"flex justify-end"},I=s("tr",null,[s("th",{scope:"col",class:"px-6 py-3"}),s("th",{scope:"col",class:"px-6 py-3"}," Tenant Name "),s("th",{scope:"col",class:"px-6 py-3"}," Address "),s("th",{scope:"col",class:"px-6 py-3"}," GLA (SQFT) "),s("th",{scope:"col",class:"px-6 py-3"}," Start Date "),s("th",{scope:"col",class:"px-6 py-3"}," End Date "),s("th",{scope:"col",class:"px-6 py-3"}," Rent / Sq Ft ")],-1),K={scope:"row",class:"px-6 py-4 space-x-2"},U={class:"relative mr-1.5 flex h-2.5 w-2.5"},G={class:"px-6 py-4 text-gray-900"},J={class:"px-6 py-4 dark:text-zinc-100/80"},Q={class:"px-6 py-4 dark:text-zinc-100/80"},X={class:"px-6 py-4 dark:text-zinc-100/80"},Z={class:"px-6 py-4 space-x-2"},H={class:"px-6 py-4 space-x-2"},ie={__name:"Show",props:{asset:Object,associates:Array,leases:Array},setup(c){const y=c,u=w(),x=E(()=>u.props.auth.user),{getFileStatusClass:f}=T(),p=v({}),S=L($);let d="";j({credits:[],required:!0,allowMultiple:!0,allowRevert:!1,acceptedFileTypes:["application/pdf"],server:{process:{url:route("assets.leases.store",y.asset),headers:{Accept:"application/json","X-CSRF-TOKEN":u.props.csrf},onerror:t=>{console.log("on error"),d=JSON.parse(t)}}},labelFileProcessingError:t=>(console.log(t),d.errors&&d.errors.upload_file?d.errors.upload_file.join(" "):d.message)});const b=(t,D)=>{g.reload({only:["leases"]})},k=()=>{console.log("handle init")};return F(()=>{Echo.private(`tenant-global-channel.${u.props.tenant_id}`).listen("FileStatusUpdate",t=>{g.reload({only:["leases"]})})}),A(()=>{x.value&&Echo.leave(`tenant-global-channel.${u.props.tenant_id}`)}),(t,D)=>(n(),r(m,null,[o(l(C),{title:"Asset"}),o(N,null,{header:i(()=>[h(" Asset - "+a(c.asset.name),1)]),default:i(()=>[s("div",M,[o(z,{href:t.route("assets.edit",c.asset)},{default:i(()=>[h("Edit Asset")]),_:1},8,["href"])]),o(V,{asset:c.asset},null,8,["asset"]),o(q,{associates:c.associates},null,8,["associates"]),o(l(S),{name:"lease_document",onInit:k,onProcessfile:b,ref:"pond","class-name":"my-file-upload","label-idle":"Lease Drop or <span class='filepond--label-action'>Browse</span>"},null,512),o(B,null,{head:i(()=>[I]),body:i(()=>[(n(!0),r(m,null,O(y.leases,e=>(n(),r("tr",{key:e.id,class:"bg-white border-b border-gray-50 dark:bg-zinc-700/50 dark:border-zinc-600"},[s("th",K,[s("span",{class:_(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset",l(f)(p[e.id]==="Deleting"?"Deleting":e.status)])},[s("span",U,[e.status!="Ready"?(n(),r(m,{key:0},[s("span",{class:_(["absolute inline-flex h-full w-full animate-ping rounded-full",l(f)(p[e.id]==="Deleting"?"Deleting":e.status,"PROCESS_CLASSES")])},null,2),s("span",{class:_(["relative inline-flex h-2.5 w-2.5 rounded-full",l(f)(p[e.id]==="Deleting"?"Deleting":e.status,"PROCESS_CLASSES")])},null,2)],64)):(n(),r("span",{key:1,class:_(["relative inline-flex h-2.5 w-2.5 rounded-full",l(f)(p[e.id]==="Deleting"?"Deleting":e.status,"PROCESS_CLASSES")])},null,2))]),s("span",null,a(p[e.id]==="Deleting"?"Deleting":e.status),1)],2)]),s("td",G,[e.status=="Ready"?(n(),R(l(P),{key:0,href:t.route("assets.leases.show",[e.asset_id,e.id])},{default:i(()=>[s("strong",null,a(e.tenant_name),1)]),_:2},1032,["href"])):(n(),r(m,{key:1},[h(a(e.og_filename),1)],64))]),s("td",J,a(e.address??"--"),1),s("td",Q,a(t.filters.formatNumber(e.gla)??"--"),1),s("td",X,a(e.start_date??"--"),1),s("td",Z,a(e.end_date??"--"),1),s("td",H,a(t.filters.formatMoney(e.rent_per_sqft)??"--"),1)]))),128))]),_:1})]),_:1})],64))}};export{ie as default};
