import{o as d,d as _,a as e,z as w,Q as j,h as N,r as V,j as D,O as b,l as T,b as a,u as o,w as t,F as g,Z as I,f as n,t as c,c as y,e as $,g as z,n as h,A as M,C as U}from"./app-7b344256.js";import{_ as q,f as J}from"./AuthenticatedLayout-a7df9ad2.js";import{_ as C}from"./PrimaryLink-c64d08e5.js";import{s as K,a as S}from"./tabpanel.esm-8a6f536d.js";import E from"./LeaseDetail-eb68642f.js";import{b as A,_ as Q,a as X}from"./BoxIcon-90766995.js";import{V as Z,p as G,s as H}from"./filepond.min-4a366ffe.js";/* empty css                */import F from"./BasicTerms-16a4e5d2.js";import O from"./RentSchedule-a87dcf0b.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";import"./toast-6208c2a0.js";import"./DropdownLink-91da35fa.js";import"./index-449109f4.js";import"./ToastList-bef51c37.js";import"./ripple.esm-dfb50f37.js";import"./index.esm-4c0a0761.js";import"./index.esm-6a6b80b0.js";import"./Table-4f6c7763.js";const Y={class:"col-span-6 rounded-lg shadow-md border p-4"},ee={class:"text-indigo-500"},f={__name:"SmallCard",setup(s){return(r,v)=>(d(),_("div",Y,[e("h5",ee,[w(r.$slots,"header")]),w(r.$slots,"default")]))}};const m=s=>(M("data-v-1f7460c6"),s=s(),U(),s),se={class:"grid grid-cols-12 gap-4"},ae={class:"col-span-6"},te={class:"mb-8"},le={class:"text-indigo-600"},oe={class:"text-gray-500"},ne={class:"col-span-6 flex flex-col"},ce={class:"max-h-36 overflow-auto h-36"},re={class:"ml-auto mt-4"},ie={class:"col-span-6 mt-2"},de=m(()=>e("div",{class:"flex align-items-center gap-2"},[e("h6",{class:"font-bold white-space-nowrap"},"Current Lease")],-1)),ue={class:"grid grid-cols-12 gap-6"},me=m(()=>e("div",{class:"flex align-items-center gap-2"},[e("h6",{class:"font-bold white-space-nowrap"},"Original Lease Abstract")],-1)),_e={class:"grid grid-cols-12 gap-6"},he={class:"flex align-items-center gap-2"},fe={class:"inline-flex items-center text-xs font-medium"},pe={class:"relative flex h-2.5 w-2.5"},ge={class:"font-bold white-space-nowrap"},Se={class:"text-gray-400"},ve={class:"min-h-96"},xe={class:"m-0"},we=m(()=>e("h4",null,"Processing...",-1)),be={class:"json-container"},ye=m(()=>e("h3",null,"Raw Extracted Data",-1)),$e=m(()=>e("h4",null,"Basic Extracted Data",-1)),Ce=m(()=>e("h4",null,"Detailed Extracted Data",-1)),Ee={__name:"Show",props:{asset:Object,associates:Array,lease:Object},setup(s){const r=j(),v=N(()=>r.props.auth.user),k=s,{getFileStatusClass:p}=J(),R=Z(G),B=V(null);let u="";H({credits:[],required:!0,allowMultiple:!0,allowRevert:!1,acceptedFileTypes:["application/pdf"],server:{process:{url:route("leases.amendments.store",[k.lease]),headers:{Accept:"application/json","X-CSRF-TOKEN":r.props.csrf},ondata:l=>(l.append("classification","lease_amendment"),l),onsuccess:l=>{console.log("on success"),console.log(l)},onerror:l=>{console.log("on error"),u=JSON.parse(l)}}},labelFileProcessingError:l=>(console.log(l),console.log(u),u.errors&&u.errors.lease_amendment?u.errors.lease_amendment.join(" "):u.message)});const P=(l,L)=>{console.log("on process file"),b.reload({only:["lease"]})};return D(()=>{Echo.private(`tenant-global-channel.${r.props.tenant_id}`).listen("FileStatusUpdate",l=>{b.reload({only:["lease"]})})}),T(()=>{v.value&&Echo.leave(`tenant-global-channel.${r.props.tenant_id}`)}),(l,L)=>(d(),_(g,null,[a(o(I),{title:"Asset"}),a(q,null,{header:t(()=>[n(" Asset - "+c(s.asset.name),1)]),default:t(()=>[a(C,{href:l.route("assets.show",s.asset)},{default:t(()=>[a(A,{class:"bx-arrow-back mr-2"}),n("Leases ")]),_:1},8,["href"]),a(Q,{asset:s.asset},null,8,["asset"]),a(X,{associates:s.associates},null,8,["associates"]),e("div",se,[e("div",ae,[e("div",te,[e("h2",le,c(s.lease.tenant),1),e("h5",oe,c(s.lease.premise_address),1)])]),e("div",ne,[e("div",ce,[a(o(R),{name:"lease_amendment",ref_key:"pond",ref:B,onProcessfile:P,"class-name":"my-file-upload","label-idle":"Amendment Drop or <span class='filepond--label-action'>Browse</span>"},null,512)]),e("div",re,[a(C,{class:"bg-indigo-600",href:l.route("assets.leases.chats.index",[s.asset,s.lease])},{default:t(()=>[n(" Leasemate"),a(A,{class:"bx-comment-detail ml-2"})]),_:1},8,["href"])])])]),e("div",ie,[a(o(K),{scrollable:!0},{default:t(()=>[a(o(S),null,{header:t(()=>[de]),default:t(()=>[e("div",ue,[a(f,null,{header:t(()=>[n(" Basic Terms ")]),default:t(()=>[a(F,{lease:s.lease},null,8,["lease"])]),_:1}),a(f,null,{header:t(()=>[n(" Rent Schedule ")]),default:t(()=>[a(O,{lease:s.lease},null,8,["lease"])]),_:1})]),a(E)]),_:1}),s.lease.amendments.length?(d(),y(o(S),{key:0},{header:t(()=>[me]),default:t(()=>[e("div",_e,[a(f,null,{header:t(()=>[n(" Basic Terms ")]),default:t(()=>[a(F,{lease:s.lease},null,8,["lease"])]),_:1}),a(f,null,{header:t(()=>[n(" Rent Schedule ")]),default:t(()=>[a(O,{lease:s.lease},null,8,["lease"])]),_:1})]),a(E)]),_:1})):$("",!0),s.lease.amendments?(d(!0),_(g,{key:1},z(s.lease.amendments,(i,x)=>(d(),y(o(S),{key:x},{header:t(()=>[e("div",he,[e("span",fe,[e("span",pe,[["Ready","Failed","Archived"].includes(i.document.status)?(d(),_("span",{key:1,class:h(["relative inline-flex h-2.5 w-2.5 rounded-full",o(p)(i.document.status,"PROCESS_CLASSES")])},null,2)):(d(),_(g,{key:0},[e("span",{class:h(["absolute inline-flex h-full w-full animate-ping rounded-full",o(p)(i.document.status,"PROCESS_CLASSES")])},null,2),e("span",{class:h(["relative inline-flex h-2.5 w-2.5 rounded-full",o(p)(i.document.status,"PROCESS_CLASSES")])},null,2)],64))])]),e("span",ge,[e("h6",{class:h({"text-red-400":i.document.status==="Failed"})},[n(" Amendment #"+c(++x)+" ",1),e("small",Se,c(i.execution_date),1)],2)])])]),default:t(()=>[e("div",ve,[e("p",xe,[we,e("h5",null,c(i.document.uuid),1)])])]),_:2},1024))),128)):$("",!0)]),_:1}),e("div",be,[ye,$e,e("pre",null,c(s.lease.extracted_data??"--"),1),Ce,e("pre",null,c(s.lease.detailed_extracted_data??"--"),1)])])]),_:1})],64))}},Ke=W(Ee,[["__scopeId","data-v-1f7460c6"]]);export{Ke as default};
