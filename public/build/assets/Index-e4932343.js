import{_ as D,h as S,f as U}from"./AuthenticatedLayout-e29f8a2e.js";import{K as j,h as M,m,k as V,O as y,C as $,o as _,f,a as o,u as r,w as a,F as b,Z as B,d as c,b as e,j as N,s as O,t as n,n as A}from"./app-6afb21a6.js";import{V as E,p as P,s as T}from"./filepond-plugin-file-validate-type.esm-06fb4e0e.js";import{_ as Y}from"./Pagination-96df9fb1.js";import{_ as z,a as R,D as K}from"./DangerButton-74bcfc51.js";import"./_plugin-vue_export-helper-c27b6911.js";import"./feather-a0fe5b01.js";const q={class:"py-6"},I={class:"relative flex justify-end mb-4"},J=e("i",{class:"bx bx-plus text-16 align-middle ltr:mr-1 rtl:ml-1"},null,-1),L={class:"py-6"},X={class:"flex flex-col"},Z={class:"overflow-x-auto"},G={class:"inline-block min-w-full align-middle"},H={class:"overflow-visible"},Q={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-600"},W=e("thead",{class:"bg-gray-50 dark:bg-gray-700"},[e("tr",{class:"text-gray-800 dark:text-gray-300"},[e("th",{scope:"col",class:"p-3.5 text-sm text-start font-semibold min-w-[10rem]"}," File Name "),e("th",{scope:"col",class:"p-3.5 text-sm text-start font-semibold min-w-[10rem]"}," Uploaded "),e("th",{scope:"col",class:"p-3.5 text-sm text-start font-semibold min-w-[6rem]"}," File Size "),e("th",{scope:"col",class:"p-3.5 text-sm text-start font-semibold min-w-[8rem]"}," Status "),e("th",{scope:"col",class:"p-3.5 text-sm text-start font-semibold"}," Action ")])],-1),ee={class:"divide-y divide-gray-200 dark:divide-gray-600"},te={class:"p-3.5 text-sm text-gray-700 dark:text-gray-400"},se=["href"],oe={class:"p-3.5 text-sm text-gray-700 dark:text-gray-400"},le={class:"text-xs"},ae={class:"p-3.5 text-sm text-gray-700 dark:text-gray-400"},ie={class:"p-3.5 text-sm text-gray-700 dark:text-gray-400"},re={class:"p-3.5"},ne=["onClick"],de=e("i",{class:"bx bx-trash text-lg hover:text-red-400"},null,-1),ce=[de],ue={class:"p-6"},pe=e("h2",{class:"text-lg font-medium text-gray-900"}," Are you sure you want to delete this document? ",-1),me={class:"mt-6 flex justify-end"},ke={__name:"Index",props:{uploaded_files:{type:Object}},setup(v){const g=j(),h=M(()=>g.props.auth.user),{getFileStatusClass:k}=U(),l=m(null),u=m(!1),w=s=>{u.value=!0,l.value=s},p=()=>{u.value=!1,l.value=null},F=async()=>{console.log(l.value),l.value&&y.delete(route("file-upload.destroy",l.value.id),{preserveScroll:!0,onSuccess:()=>{l.value=null,p()}})},C=E(P),x=m([]);let i="";return T({credits:[],required:!0,allowMultiple:!0,allowRevert:!1,acceptedFileTypes:["application/pdf","image/png","image/jpeg","image/jpg","image/gif"],server:{process:{url:"/file-upload",headers:{Accept:"application/json","X-CSRF-TOKEN":g.props.csrf},onerror:s=>{i=JSON.parse(s)}}},labelFileProcessingError:s=>(console.log(s),i.errors&&i.errors.upload_file?i.errors.upload_file.join(" "):i.message)}),V(()=>{Echo.private(`App.Models.User.${h.value.id}`).listen("FileStatusUpdate",s=>{y.reload({only:["uploaded_files"]})})}),$(()=>{Echo.leave(`App.Models.User.${h.value.id}`)}),(s,d)=>(_(),f(b,null,[o(r(B),{title:"File Upload"}),o(D,null,{header:a(()=>[c(" File Upload ")]),default:a(()=>[e("div",q,[e("div",I,[o(r(N),{href:s.route("file-upload.create"),type:"button",class:"mb-4 btn text-white bg-violet-500 border-violet-500 hover:bg-violet-600 hover:border-violet-600 focus:bg-violet-600 focus:border-violet-600 focus:ring focus:ring-violet-500/30 active:bg-violet-600 active:border-violet-600"},{default:a(()=>[J,c(" Upload ")]),_:1},8,["href"])]),e("div",L,[o(r(C),{name:"upload_file",ref:"pond","class-name":"my-file-upload","label-idle":"Drag & Drop your PDF files here or <span class='filepond--label-action'>Browse</span>",modelValue:x.value,"onUpdate:modelValue":d[0]||(d[0]=t=>x.value=t)},null,8,["modelValue"])]),e("div",X,[e("div",Z,[e("div",G,[e("div",H,[e("table",Q,[W,e("tbody",ee,[(_(!0),f(b,null,O(v.uploaded_files.data,t=>(_(),f("tr",{key:t.id},[e("td",te,[e("a",{href:t.download_link,target:"_blank",rel:"noopener noreferrer",class:"font-medium"},n(t.original_name),9,se)]),e("td",oe,[e("p",null,n(r(S)(t.created_at).format("MMM DD, YYYY h:mm a")),1),e("span",le,"by "+n(t.user.name),1)]),e("td",ae,n(t.size_readable),1),e("td",ie,[e("span",{class:A(["inline-flex items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset",r(k)(t.status)])},n(t.status),3)]),e("td",re,[e("button",{onClick:_e=>w(t)},ce,8,ne)])]))),128))])])])])])]),o(Y,{dataset:v.uploaded_files,class:"mt-4"},null,8,["dataset"]),o(z,{show:u.value,onClose:p},{default:a(()=>[e("div",ue,[pe,e("div",me,[o(R,{onClick:p},{default:a(()=>[c(" Cancel ")]),_:1}),o(K,{class:"ml-3",onClick:d[1]||(d[1]=t=>F())},{default:a(()=>[c(" Delete File ")]),_:1})])])]),_:1},8,["show"])])]),_:1})],64))}};export{ke as default};
